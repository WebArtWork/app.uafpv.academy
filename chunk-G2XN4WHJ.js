import{a as te}from"./chunk-W2HDGUYG.js";import{a as ie}from"./chunk-KWWNFWCU.js";import{a as ne}from"./chunk-WWNNYGBW.js";import{a as Q}from"./chunk-C7TNO6B4.js";import{e as B,g as Z,h as ee}from"./chunk-R3HM3236.js";import{$ as s,$a as G,A as v,D as E,Hb as Y,I as T,J as A,Ja as O,Ka as y,L as r,O as m,P as x,Q as N,U as C,Va as z,W as u,Xa as R,Y as V,Ya as U,_ as n,aa as w,ab as J,da as h,ea as d,fa as l,gb as D,lb as S,mb as K,oa as c,pa as _,qa as L,sb as W,tb as g,u as H,vb as b,wa as I,xa as M,xb as X,ya as F,z as f}from"./chunk-2Y7ZGU6E.js";function ve(t,a){if(t&1&&(n(0,"div",5)(1,"div",6)(2,"span",7),c(3,"check_circle"),s()(),n(4,"div",8)(5,"h3",9),c(6),I(7,"split"),s(),n(8,"div",10),c(9),I(10,"split"),s()()()),t&2){let e=a.$implicit;r(6),_(M(7,2,e)),r(3),_(F(10,4,e,1))}}function he(t,a){if(t&1&&(n(0,"div")(1,"h2",3),c(2,"Course.\u0429\u043E \u0432\u0438 \u0434\u0456\u0437\u043D\u0430\u0454\u0442\u0435\u0441\u044C"),s(),n(3,"div"),C(4,ve,11,7,"div",4),s()()),t&2){let e=l();r(4),u("ngForOf",e.course.learning)}}function Ce(t,a){if(t&1&&(n(0,"div",5)(1,"div",6)(2,"span",7),c(3,"check_circle"),s()(),n(4,"div",8)(5,"h3",9),c(6),I(7,"split"),s(),n(8,"div",10),c(9),I(10,"split"),s()()()),t&2){let e=a.$implicit;r(6),_(M(7,2,e)),r(3),_(F(10,4,e,1))}}function we(t,a){if(t&1&&(n(0,"div")(1,"h2",3),c(2,"Course.\u0426\u0435\u0439 \u043A\u0443\u0440\u0441 \u0432\u043A\u043B\u044E\u0447\u0430\u0454 \u0432 \u0441\u0435\u0431\u0435"),s(),n(3,"div"),C(4,Ce,11,7,"div",4),s()()),t&2){let e=l();r(4),u("ngForOf",e.course.included)}}function xe(t,a){if(t&1){let e=h();n(0,"div",12),d("click",function(){let i=f(e).$implicit,p=l(2);return v(p.selectLesson.emit(i._id))}),n(1,"div",6)(2,"span",7),c(3,"check_circle"),s()(),n(4,"div",8)(5,"div",13),c(6),s(),n(7,"div",14),c(8),s()()()}if(t&2){let e=a.$implicit;r(6),_(e.name),r(2),_(e.shortDescription)}}function ge(t,a){if(t&1&&(n(0,"div")(1,"h2",3),c(2,"Course.\u0417\u043C\u0456\u0441\u0442 \u043A\u0443\u0440\u0441\u0443"),s(),n(3,"div"),C(4,xe,9,2,"div",11),s()()),t&2){let e=l();r(4),u("ngForOf",e.lessons)}}function Ie(t,a){if(t&1&&(n(0,"div"),c(1),s()),t&2){let e=l();r(),L(" \u041F\u0435\u0440\u0435\u0434 \u043F\u0440\u043E\u0445\u043E\u0434\u0436\u0435\u043D\u043D\u044F\u043C \u0446\u044C\u043E\u0433\u043E \u043A\u0443\u0440\u0441\u0443 \u0440\u0435\u043A\u043E\u043C\u0435\u043D\u0434\u0443\u0454\u0442\u044C\u0441\u044F \u0441\u043F\u043E\u0447\u0430\u0442\u043A\u0443 \u043F\u0440\u043E\u0439\u0442\u0438 ",e.scs.doc(e.course.suggestedCourse).name,", \u0449\u043E\u0431 \u043A\u0440\u0430\u0449\u0435 \u043E\u0437\u043D\u0430\u0439\u043E\u043C\u0438\u0442\u0438\u0441\u044F \u0437 \u043C\u0430\u0442\u0435\u0440\u0456\u0430\u043B\u043E\u043C. ")}}function Ee(t,a){if(t&1&&(n(0,"div"),c(1),s()),t&2){let e=l();r(),L(" \u0414\u043B\u044F \u043F\u0440\u043E\u0445\u043E\u0434\u0436\u0435\u043D\u043D\u044F \u0446\u044C\u043E\u0433\u043E \u043A\u0443\u0440\u0441\u0443 \u043D\u0435\u043E\u0431\u0445\u0456\u0434\u043D\u043E \u0441\u043F\u043E\u0447\u0430\u0442\u043A\u0443 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438 ",e.scs.doc(e.course.requiredCourse).name,", \u043E\u0441\u043A\u0456\u043B\u044C\u043A\u0438 \u0432\u0456\u043D \u043C\u0456\u0441\u0442\u0438\u0442\u044C \u0432\u0430\u0436\u043B\u0438\u0432\u0456 \u0431\u0430\u0437\u043E\u0432\u0456 \u0437\u043D\u0430\u043D\u043D\u044F. ")}}function ye(t,a){if(t&1&&(n(0,"div",5)(1,"div",6)(2,"span",7),c(3,"check_circle"),s()(),n(4,"div",8)(5,"h3",9),c(6),I(7,"split"),s(),n(8,"div",10),c(9),I(10,"split"),s()()()),t&2){let e=a.$implicit;r(6),_(M(7,2,e)),r(3),_(F(10,4,e,1))}}function Se(t,a){if(t&1&&(n(0,"div")(1,"h2",3),c(2,"Course.\u0412\u0438\u043C\u043E\u0433\u0438 \u0434\u043E \u0446\u044C\u043E\u0433\u043E \u043A\u0443\u0440\u0441\u0443"),s(),n(3,"div"),C(4,ye,11,7,"div",4),s()()),t&2){let e=l();r(4),u("ngForOf",e.course.requirements)}}var oe=(()=>{class t{constructor(e){this.scs=e,this.lessons=[],this.selectLesson=new E}static{this.\u0275fac=function(o){return new(o||t)(m(B))}}static{this.\u0275cmp=x({type:t,selectors:[["app-view"]],inputs:{course:"course",lessons:"lessons"},outputs:{selectLesson:"selectLesson"},standalone:!1,decls:8,vars:7,consts:[[1,"documents-main-row"],[4,"ngIf"],[3,"innerHTML"],["translate","",1,"learn__main-title"],["class","learn-block",4,"ngFor","ngForOf"],[1,"learn-block"],[1,"learn-block__img"],[1,"material-icons"],[1,"learn-block__text"],[1,"learn__title"],[1,"learn__description"],["class","learn-block",3,"click",4,"ngFor","ngForOf"],[1,"learn-block",3,"click"],[1,"learn__lesson-title"],[1,"learn__lesson-description"]],template:function(o,i){o&1&&(n(0,"div",0),C(1,he,5,1,"div",1)(2,we,5,1,"div",1)(3,ge,5,1,"div",1)(4,Ie,2,1,"div",1)(5,Ee,2,1,"div",1)(6,Se,5,1,"div",1),w(7,"div",2),s()),o&2&&(r(),u("ngIf",i.course.learning==null?null:i.course.learning.length),r(),u("ngIf",i.course.included==null?null:i.course.included.length),r(),u("ngIf",i.course.included==null?null:i.course.included.length),r(),u("ngIf",i.course.suggestedCourse),r(),u("ngIf",i.course.requiredCourse),r(),u("ngIf",i.course.requirements==null?null:i.course.requirements.length),r(),u("innerHTML",i.course.description,T))},dependencies:[g,O,y,Z],styles:[".learn-block[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:15px}.learn-block__img[_ngcontent-%COMP%]{display:flex;flex:0 0 45px;color:var(--c-primary);margin-right:10px}.learn-block__img[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:45px}.learn-block__text[_ngcontent-%COMP%]{flex:1 0}.learn__main-title[_ngcontent-%COMP%]{font-size:26px;font-weight:800}.learn__title[_ngcontent-%COMP%], .learn__lesson-title[_ngcontent-%COMP%]{font-size:22px;font-weight:700;margin:0}@media screen and (max-width: 767px){.learn__main-title[_ngcontent-%COMP%]{font-size:24px;font-weight:800}.learn__lesson-title[_ngcontent-%COMP%]{font-size:22px}.learn-block[_ngcontent-%COMP%]{align-items:self-start}}"]})}}return t})();function ke(t,a){if(t&1){let e=h();n(0,"winput",10),d("wChange",function(i){f(e);let p=l().$implicit;return v(p.text=i+"")}),s()}}function Te(t,a){if(t&1){let e=h();n(0,"winput",11),d("wChange",function(i){f(e);let p=l().$implicit;return v(p.radio=i+"")}),s()}if(t&2){let e=l().$implicit;u("items",e.answers)}}function Le(t,a){if(t&1){let e=h();n(0,"winput",12),d("wChange",function(i){f(e);let p=l().$implicit,q=l(2);return v(q.setCheckboxes(p,i))}),s()}if(t&2){let e=l().$implicit;u("items",e.answers)}}function Ve(t,a){if(t&1&&(n(0,"div")(1,"p"),c(2),s(),C(3,ke,1,0,"winput",7)(4,Te,1,1,"winput",8)(5,Le,1,1,"winput",9),s()),t&2){let e=a.$implicit;r(2),_(e.question),r(),u("ngIf",e.type==="Text"),r(),u("ngIf",e.type==="Radio"),r(),u("ngIf",e.type==="Checkbox")}}function Me(t,a){if(t&1){let e=h();n(0,"div",0)(1,"div",1),c(2),s(),w(3,"div",2),C(4,Ve,6,4,"div",4),n(5,"wbutton",5),d("click",function(){let i=f(e).$implicit,p=l();return v(p.answer(i))}),n(6,"span",6),c(7,"Common.Checkup"),s()()()}if(t&2){let e=a.$implicit;r(2),_(e.name),r(),u("innerHTML",e.description,T),r(),u("ngForOf",e.questions)}}var ce=(()=>{class t{constructor(e,o,i,p){this._translate=e,this._alert=o,this._http=i,this._core=p,this.tests=[],this.nextLesson=new E}setCheckboxes(e,o){e.checkboxes=e.checkboxes||[],e.checkboxes=o}answer(e){this._http.post("/api/school/test/answer",{certificate:this.certificate,test:e}).subscribe(o=>{o?(this._core.copy(o,this.certificate),this.nextLesson.emit()):this._alert.warning({text:this._translate.translate("The answer is incorrect")})})}static{this.\u0275fac=function(o){return new(o||t)(m(W),m(K),m(S),m(D))}}static{this.\u0275cmp=x({type:t,selectors:[["app-lesson"]],inputs:{lesson:"lesson",certificate:"certificate",tests:"tests"},outputs:{nextLesson:"nextLesson"},standalone:!1,decls:5,vars:3,consts:[[1,"documents-main-row"],[1,"documents__title"],[1,"documents__description",3,"innerHTML"],["class","documents-main-row",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"click"],["translate",""],["placeholder","answer the question",3,"wChange",4,"ngIf"],["type","radio",3,"items","wChange",4,"ngIf"],["type","checkbox",3,"items","wChange",4,"ngIf"],["placeholder","answer the question",3,"wChange"],["type","radio",3,"wChange","items"],["type","checkbox",3,"wChange","items"]],template:function(o,i){o&1&&(n(0,"div",0)(1,"div",1),c(2),s(),w(3,"div",2),s(),C(4,Me,8,3,"div",3)),o&2&&(r(2),_(i.lesson.name),r(),u("innerHTML",i.lesson.description,T),r(),u("ngForOf",i.tests))},dependencies:[g,O,y,b,X],encapsulation:2})}}return t})();var le=(()=>{class t{constructor(e){this._http=e,this.paid=new E}buy(){this._http.post("/api/school/participate",{session:this.courseId,course:this.sessionId}).subscribe(e=>{this.paid.emit(e)})}static{this.\u0275fac=function(o){return new(o||t)(m(S))}}static{this.\u0275cmp=x({type:t,selectors:[["app-buy"]],inputs:{courseId:"courseId",sessionId:"sessionId"},outputs:{paid:"paid"},standalone:!1,decls:3,vars:0,consts:[[3,"click"],["translate",""]],template:function(o,i){o&1&&(n(0,"wbutton",0),d("click",function(){return i.buy()}),n(1,"span",1),c(2,"Common.Buy"),s()())},dependencies:[g,b],encapsulation:2})}}return t})();function De(t,a){if(t&1){let e=h();n(0,"wselect",25),d("modelChange",function(i){f(e);let p=l();return v(p.setLesson(i))}),s()}if(t&2){let e=l();u("select",e.lesson._id)("items",e.lessons)}}function Be(t,a){if(t&1){let e=h();n(0,"wbutton",26),d("click",function(){f(e);let i=l();return v(i.show="lesson")}),n(1,"span",27),c(2,"Common.\u041F\u0435\u0440\u0435\u0439\u0442\u0438 \u0434\u043E \u043B\u0435\u043A\u0446\u0456\u0439"),s()()}}function je(t,a){if(t&1){let e=h();n(0,"wbutton",26),d("click",function(){f(e);let i=l();return v(i.buy())}),n(1,"span",27),c(2,"Common.\u041F\u0440\u0438\u0434\u0431\u0430\u0442\u0438"),s()()}}function qe(t,a){if(t&1){let e=h();n(0,"app-view",28),d("selectLesson",function(i){f(e);let p=l();return v(p.setLesson(i))}),s()}if(t&2){let e=l();u("lessons",e.allLessons)("course",e.course)}}function Ae(t,a){if(t&1){let e=h();n(0,"app-lesson",29),d("nextLesson",function(){f(e);let i=l();return v(i.nextLesson())}),s()}if(t&2){let e=l();u("certificate",e.certificate)("lesson",e.lesson)("tests",e.tests)}}function Pe(t,a){if(t&1){let e=h();n(0,"app-buy",30),d("paid",function(i){f(e);let p=l();return p.show="lesson",v(p.certificate=i)}),s()}if(t&2){let e=l();u("sessionId",e.sessionId)("courseId",e.courseId)}}var $=(()=>{class t{get allowedNextLesson(){return this.testsIds.every(e=>this.certificate.tests.includes(e))}constructor(e,o,i,p,q,ae,pe,me,de){this.userService=e,this._ss=o,this._scs=i,this._sts=p,this._sls=q,this._http=ae,this._core=pe,this._router=me,this._route=de,this.url=J.url,this.show="view",this.isMenuOpen=!1,this.allLessons=[],this.lessons=[],this.tests=[],this.testsIds=[],this._route.paramMap.subscribe(k=>{this.courseId=k.get("course_id")||"",this.course=this._scs.doc(this.courseId),this.sessionId=k.get("session_id")||""}),this._core.onComplete("schoolcertificate_loaded").then(()=>{let k=this._ss.schoolcertificates.find(_e=>_e.course===this.courseId);k&&(this.certificate=k)}),this._loadLessons()}nextLesson(){this.certificate.lessons.push(this.lesson._id),this._http.post("/api/school/certificate/lesson",{certificate:this.certificate,lesson:this.lesson}),this._addNextLesson(),this._loadTests()}setLesson(e){this.certificate&&(this.lesson=this.allLessons.filter(o=>o._id===e)[0],this.show="lesson")}back(){window.history.back()}buy(){this.userService.user.email?this.show="buy":this._router.navigateByUrl("/sign")}_loadLessons(){this._sls.get({query:"course="+this.courseId},{name:"public"}).subscribe(e=>{e=e.sort((o,i)=>o.order-i.order),this.allLessons.push(...e),this.certificate?.lessons?.length&&this.lessons.push(...this.allLessons.filter(o=>this.certificate.lessons.includes(o._id))),this._addNextLesson(),this._loadTests()})}_addNextLesson(){if(this.certificate?.lessons?.length!==this.allLessons.length){let e=this.lessons.map(o=>o._id);this.lesson=this.allLessons.filter(o=>!e.includes(o._id))[0],this.lessons.push(this.lesson)}}_loadTests(){this.tests=[],this._sts.get({query:"lesson="+this.lesson._id},{name:"public"}).subscribe(e=>{this.tests=e,this.testsIds=e.map(o=>o._id)})}static{this.\u0275fac=function(o){return new(o||t)(m(Q),m(ne),m(B),m(ie),m(te),m(S),m(D),m(R),m(z))}}static{this.\u0275cmp=x({type:t,selectors:[["ng-component"]],standalone:!1,decls:33,vars:17,consts:[[1,"documents-wrapper"],[1,"documents-container"],[1,"documents-list"],[1,"documents-header"],[1,"documents-header-left"],[1,"documents-header-left__arrow",3,"click"],[1,"material-icons"],["routerLink","/profile",1,"documents-header-left__avatar"],["alt","",3,"src"],[1,"documents-header__title"],[1,"burger-wrap",3,"click"],[1,"burger"],[1,"documents-sidebar"],[1,"documents-sidebar__close",3,"click"],[1,"documents-sidebar-content"],[1,"documents-sidebar__img"],[1,"documents-sidebar__title"],[1,"documents-sidebar__description"],[3,"select","items","modelChange",4,"ngIf"],[3,"click",4,"ngIf"],[1,"documents-main"],[1,"documents-main-content"],[3,"lessons","course","selectLesson",4,"ngIf"],[3,"certificate","lesson","tests","nextLesson",4,"ngIf"],[3,"sessionId","courseId","paid",4,"ngIf"],[3,"modelChange","select","items"],[3,"click"],["translate",""],[3,"selectLesson","lessons","course"],[3,"nextLesson","certificate","lesson","tests"],[3,"paid","sessionId","courseId"]],template:function(o,i){o&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),d("click",function(){return i.back()}),n(6,"span",6),c(7,"arrow_back_ios"),s()(),n(8,"div",7),w(9,"img",8),s()(),n(10,"div",9),c(11),s(),n(12,"div",10),d("click",function(){return i.isMenuOpen=!i.isMenuOpen}),w(13,"div",11),s()(),n(14,"div",12)(15,"div",13),d("click",function(){return i.isMenuOpen=!i.isMenuOpen}),n(16,"span",6),c(17,"close"),s()(),n(18,"div",14)(19,"div",15),w(20,"img",8),s(),n(21,"div",16),c(22),s(),n(23,"div",17),c(24),s(),C(25,De,1,2,"wselect",18)(26,Be,3,0,"wbutton",19)(27,je,3,0,"wbutton",19),s()(),n(28,"div",20)(29,"div",21),C(30,qe,1,2,"app-view",22)(31,Ae,1,3,"app-lesson",23)(32,Pe,1,2,"app-buy",24),s()()()()()),o&2&&(V("documents-wrapper--open",i.isMenuOpen),r(9),u("src",i.userService.thumb,A),r(2),_(i.course.name),r(2),V("burger--close",i.isMenuOpen),r(),V("documents-sidebar--open",i.isMenuOpen),r(6),u("src",i.url+i.course.thumb,A),r(2),_(i.course.name),r(2),L(" ",i.course.description," "),r(),u("ngIf",i.lesson&&i.show==="lesson"),r(),u("ngIf",i.certificate&&i.show!=="lesson"),r(),u("ngIf",!i.certificate),r(3),u("ngIf",i.show==="view"),r(),u("ngIf",i.show==="lesson"&&i.lesson&&i.certificate),r(),u("ngIf",i.show==="buy"))},dependencies:[U,g,Y,y,b,oe,ce,le],encapsulation:2})}}return t})();var $e=[{path:":course_id",component:$},{path:":course_id/:session_id",component:$}],wt=(()=>{class t{static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275mod=N({type:t})}static{this.\u0275inj=H({imports:[G.forChild($e),ee]})}}return t})();export{wt as CourseModule};
