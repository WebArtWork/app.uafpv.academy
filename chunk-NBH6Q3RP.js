import{h as $}from"./chunk-R3HM3236.js";import{$ as p,$a as O,A as _,Ab as B,Cb as H,Fa as M,J as T,L as I,O as r,P as k,Q as g,U as D,W as y,_ as a,da as C,ea as m,f as d,fa as v,gb as P,j as u,mb as E,nb as N,oa as S,pb as R,qa as j,sb as A,t as l,u as f,w,x as F,z as h,zb as V}from"./chunk-2Y7ZGU6E.js";var z={formId:"file",title:"File",components:[{name:"Photo",key:"path",fields:[{name:"Label",value:"Image"},{name:"Wdith",value:1920},{name:"Height",value:1080}]}]};var L=(()=>{class i extends N{constructor(t){super({name:"file"}),this._file=t,this._file.add({id:"formPhoto",resize:1920,cb:e=>{typeof e=="string"&&typeof this.setFile=="function"&&this.setFile(e)}}),this._file.add({id:"formPhotos",multiple:!0,resize:1920,cb:e=>{typeof e=="string"&&typeof this.setFile=="function"&&this.setFile(e)}})}static{this.\u0275fac=function(e){return new(e||i)(w(R))}}static{this.\u0275prov=l({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var x=class{_document;_textarea;constructor(n,t){this._document=t;let e=this._textarea=this._document.createElement("textarea"),o=e.style;o.position="fixed",o.top=o.opacity="0",o.left="-999em",e.setAttribute("aria-hidden","true"),e.value=n,e.readOnly=!0,(this._document.fullscreenElement||this._document.body).appendChild(e)}copy(){let n=this._textarea,t=!1;try{if(n){let e=this._document.activeElement;n.select(),n.setSelectionRange(0,n.value.length),t=this._document.execCommand("copy"),e&&e.focus()}}catch{}return t}destroy(){let n=this._textarea;n&&(n.remove(),this._textarea=void 0)}},U=(()=>{class i{_document=F(M);constructor(){}copy(t){let e=this.beginCopy(t),o=e.copy();return e.destroy(),o}beginCopy(t){return new x(t,this._document)}static \u0275fac=function(e){return new(e||i)};static \u0275prov=l({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function Q(i,n){if(i&1){let t=C();a(0,"img",3),m("click",function(){let o=h(t).$implicit,s=v();return _(s.copy(o.url))}),p()}if(i&2){let t=n.$implicit;y("src",t.url,T)}}function X(i,n){if(i&1){let t=C();a(0,"span",4),m("click",function(){let o=h(t).$implicit,s=v();return _(s.copy(o.url))}),S(1),p()}if(i&2){let t=n.$implicit;I(),j(" ",t.url," ")}}var Y=(()=>{class i{constructor(t,e,o,s,Z,G){this._translate=t,this._fileService=e,this._clipboard=o,this._alert=s,this._form=Z,this._core=G,this.columns=["img","url"],this.form=this._form.getForm("file",z),this.config={paginate:this.setRows.bind(this),perPage:20,setPerPage:this._fileService.setPerPage.bind(this._fileService),allDocs:!1,create:()=>{this._form.modal(this.form,{label:"Create",click:(c,K)=>d(this,null,function*(){K(),this._preCreate(c),yield u(this._fileService.create(c)),this.setRows()})})},delete:c=>{this._alert.question({text:this._translate.translate("Common.Are you sure you want to delete this file?"),buttons:[{text:this._translate.translate("Common.No")},{text:this._translate.translate("Common.Yes"),callback:()=>d(this,null,function*(){yield u(this._fileService.delete(c)),this.setRows()})}]})}},this.rows=[],this._page=1,this.setRows()}copy(t){this._clipboard.copy(t),this._alert.info({text:"Url has been copied"})}setRows(t=this._page){this._page=t,this._core.afterWhile(this,()=>{this._fileService.get({page:t}).subscribe(e=>{this.rows.splice(0,this.rows.length),this.rows.push(...e)})},250)}_preCreate(t){delete t.__created}static{this.\u0275fac=function(e){return new(e||i)(r(A),r(L),r(U),r(E),r(H),r(P))}}static{this.\u0275cmp=k({type:i,selectors:[["ng-component"]],standalone:!1,decls:3,vars:3,consts:[["title","Files",3,"columns","config","rows"],["cell","img"],["cell","url"],[2,"height","100px",3,"click","src"],[3,"click"]],template:function(e,o){e&1&&(a(0,"wtable",0),D(1,Q,1,1,"ng-template",1)(2,X,2,1,"ng-template",2),p()),e&2&&y("columns",o.columns)("config",o.config)("rows",o.rows)},dependencies:[B,V],encapsulation:2})}}return i})();var ee=[{path:"",component:Y}],Te=(()=>{class i{static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275mod=g({type:i})}static{this.\u0275inj=f({imports:[O.forChild(ee),$]})}}return i})();export{Te as FilesModule};
