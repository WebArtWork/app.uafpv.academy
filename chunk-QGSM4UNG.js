import{a as w}from"./chunk-WWNNYGBW.js";import{a as C}from"./chunk-C7TNO6B4.js";import{h as I}from"./chunk-R3HM3236.js";import{$a as p,Ab as y,Cb as S,O as r,P as m,Q as h,W as d,Xa as u,aa as f,gb as _,mb as v,sb as g,u as n}from"./chunk-2Y7ZGU6E.js";var b={formId:"schoolcertificate",title:"Schoolcertificate",components:[{name:"Text",key:"title",focused:!0,fields:[{name:"Placeholder",value:"fill certificates title"},{name:"Label",value:"Title"}]},{name:"Date",key:"received",fields:[{name:"Placeholder",value:"set receiving date"},{name:"Label",value:"Received"}]},{name:"Number",key:"grade",fields:[{name:"Placeholder",value:"set certificates grade"},{name:"Label",value:"Grade"}]},{name:"Date",key:"expired",fields:[{name:"Placeholder",value:"set expiration date"},{name:"Label",value:"Expired"}]},{name:"Select",key:"status",fields:[{name:"Items",value:["Pending","Received","Expired"]},{name:"Placeholder",value:"choose certificates status"},{name:"Label",value:"Status"},{name:"Multiple",value:!1}]}]};var a=(()=>{class o{get hasAccess(){return this._us.role("admin")||this._us.role("schoolowner")||this._us.role("schoolteacher")}get rows(){return this.moduleId?this._schoolcertificateService.schoolcertificatesByModuleId[this.moduleId]:this._schoolcertificateService.schoolcertificates}constructor(i,t,e,s,l,x,M){this._translate=i,this._schoolcertificateService=t,this._alert=e,this._form=s,this._core=l,this._router=x,this._us=M,this.columns=["title","received","grade","expired","status"],this.moduleType=this._router.url.includes("/certificates/")?this._router.url.split("/")[this._router.url.split("/").length-2]:"",this.moduleId=this._router.url.includes("/certificates/")?this._router.url.split("/")[this._router.url.split("/").length-1]:"",this.form=this._form.getForm("schoolcertificate",b),this.config={update:c=>{this._form.modal(this.form,[],c).then(j=>{this._core.copy(j,c),this._schoolcertificateService.update(c)})},delete:c=>{this._alert.question({text:this._translate.translate("Common.Are you sure you want to delete this certificate?"),buttons:[{text:this._translate.translate("Common.No")},{text:this._translate.translate("Common.Yes"),callback:()=>{this._schoolcertificateService.delete(c)}}]})},buttons:[this.hasAccess?{icon:"cloud_download",click:c=>{this._form.modalUnique("schoolcertificate","url",c)}}:null]}}_bulkManagement(i=!0){return()=>{this._form.modalDocs(i?[]:this.rows).then(t=>{if(i)for(let e of t)this._preCreate(e),this._schoolcertificateService.create(e);else{for(let e of this.rows)t.find(s=>s._id===e._id)||this._schoolcertificateService.delete(e);for(let e of t){let s=this.rows.find(l=>l._id===e._id);s?(this._core.copy(e,s),this._schoolcertificateService.update(s)):(this._preCreate(e),this._schoolcertificateService.create(e))}}})}}_preCreate(i){delete i.__created,this.moduleType&&(i.moduleType=this.moduleType),this.moduleId&&(i.moduleId=this.moduleId)}static{this.\u0275fac=function(t){return new(t||o)(r(g),r(w),r(v),r(S),r(_),r(u),r(C))}}static{this.\u0275cmp=m({type:o,selectors:[["ng-component"]],standalone:!1,decls:1,vars:3,consts:[["title","Certificates",3,"columns","config","rows"]],template:function(t,e){t&1&&f(0,"wtable",0),t&2&&d("columns",e.columns)("config",e.config)("rows",e.rows)},dependencies:[y],encapsulation:2})}}return o})();var k=[{path:"",component:a},{path:"course/:schoolcertificate",component:a},{path:"test/:schoolcertificate",component:a},{path:"school/:school",component:a}],z=(()=>{class o{static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275mod=h({type:o})}static{this.\u0275inj=n({imports:[p.forChild(k),I]})}}return o})();export{z as CertificatesModule};
